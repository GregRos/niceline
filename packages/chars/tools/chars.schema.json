{
  "$id": "https://gregros.dev/schemas/niceline/namespace-shape.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "",
  "description": "Recursive, namespaced dictionary of Unicode to ASCII codes.",
  "$defs": {
    "NameAlias": {
      "type": ["string"],
      "description": "A named alias."
    },
    "AsciiAlias": {
      "type": ["string"],
      "description": "A {string} ASCII alias.",
      "pattern": "^\\{.+\\}$"
    },
    "AliasMapping": {
      "title": "AliasMapping",
      "type": "array",
      "description": "Unique aliases for a character. An AsciiAlias (or null) followed by one or more other aliases.",
      "prefixItems": [
        {
          "if": { "type": "string" },
          "then": { "$ref": "#/$defs/AsciiAlias" },
          "else": { "type": "null" }
        }
      ],
      "items": {
        "$ref": "#/$defs/NameAlias"
      },
      "uniqueItems": true
    },
    "Namespace": {
      "title": "Namespace",
      "description": "Recursive, namespaced dictionary of Unicode to ASCII codes.",
      "type": "object",
      "patternProperties": {
        "^.$": {
          "description": "A leaf AliasMapping or a namespaced entry.",
          "anyOf": [
            { "$ref": "#/$defs/AliasMapping" },
            { "$ref": "#/$defs/Namespace" }
          ]
        },
        "^.{2,}$": {
          "description": "A namespaced entry.",
          "$ref": "#/$defs/Namespace"
        }
      },
      "additionalProperties": false
    }
  },
  "$ref": "#/$defs/Namespace",
  "examples": [
    {
      "idea": {
        "♂": [null, "male", "masc"],
        "flag": {
          "⚑": [null, "black"],
          "⚐": [null, "white"]
        }
      },
      "notes": {
        "♭": [null, "flat"],
        "special": {
          "a_val": ["{a.a1}", "a1"],
          "b_val": [null, "b1"]
        }
      }
    }
  ]
}
