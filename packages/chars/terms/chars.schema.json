{
  "$id": "https://gregros.dev/schemas/niceline/namespace-shape.json",
  "title": "Namespaced terms dictionary",
  "description": "Recursive, namespaced dictionary of Unicode to ASCII codes.",
  "$defs": {
    "FileReference": {
      "title": "FileReference",
      "type": "string",
      "description": "A reference to another dictionary file.",
      "pattern": "^(\\.|/).+\\.nice\\.(json|yaml|jsonc)$"
    },
    "FileReferences": {
      "title": "FileReferences",
      "type": "array",
      "description": "An array of file references.",
      "items": { "$ref": "#/$defs/FileReference" },
      "minItems": 1
    },
    "NamedAlias": {
      "title": "NamedAlias",
      "type": "string",
      "description": "A named alias."
    },
    "AsciiAlias": {
      "title": "AsciiAlias",
      "type": "string",
      "description": "A {string} ASCII alias.",
      "pattern": "^\\{.+\\}$"
    },
    "AliasMapping": {
      "title": "AliasMapping",
      "type": "array",
      "description": "Unique aliases for a character. An AsciiAlias (or null) followed by one or more other aliases.",
      "items": [
        {
          "anyOf": [{ "$ref": "#/$defs/AsciiAlias" }, { "type": "null" }]
        },
        { "$ref": "#/$defs/NamedAlias" }
      ],
      "minItems": 2,
      "additionalItems": { "$ref": "#/$defs/NamedAlias" }
    },
    "Namespace": {
      "title": "Namespace",
      "description": "Recursive, namespaced dictionary of Unicode to ASCII codes.",
      "type": "object",
      "properties": {
        "<-": {
          "$ref": "#/$defs/FileReferences"
        }
      },
      "patternProperties": {
        "->": {
          "description": "Point to another dictionary file. Should start with ",
          "type": "string",
          "pattern": "^\\.\\/.+\\.json$"
        },
        "^.$": {
          "description": "A leaf AliasMapping or a namespaced entry.",
          "anyOf": [
            { "$ref": "#/$defs/AliasMapping" },
            { "$ref": "#/$defs/Namespace" }
          ]
        },
        "^\\w{2,}$": {
          "description": "A namespaced entry.",
          "$ref": "#/$defs/Namespace"
        }
      },
      "additionalProperties": false
    }
  },
  "$ref": "#/$defs/Namespace",
  "examples": [
    {
      "idea": {
        "♂": [null, "male", "masc"],
        "flag": {
          "⚑": [null, "black"],
          "⚐": [null, "white"]
        }
      },
      "notes": {
        "♭": [null, "flat"],
        "special": {
          "a_val": ["{a.a1}", "a1"],
          "b_val": [null, "b1"]
        }
      }
    }
  ]
}
